---
title: "M√≥dulo 02"
author:
  - "Michelli In√°cio Gon√ßalves Funnicelli"
  - "Daniel Guariz Pinheiro"
  - "Marcos Rog√©rio Andr√©"
format:
  html:
    toc: true
    self-contained: false   # permite carregar as imagens da pasta
execute:
 freeze: false
resources:
  - images/nt_module02-images/**   # garante que a pasta de imagens seja copiada
editor: visual
editor_options:
  chunk_output_type: console
---

# Sistema Operacional Linux

# Comandos Linux

As tr√™s partes principais de um comando s√£o:

**CommandName (nome):** √â a regra em si que voc√™ quer executar. <br>**Flag (op√ß√£o):** √â um modificador para a opera√ß√£o do comando. Voc√™ pode inclu√≠-lo no comando usando um h√≠fen (-) ou dois (‚Äì). <br>**Argument (par√¢metro):** Serve para adicionar informa√ß√µes ou contexto ao comando.<br>

## Tabela de comandos b√°sicos:

### Tabela de Comandos Linux (Com Categoria)

| N¬∫  | Categoria                       | Comando     | Fun√ß√£o                                                                   |
|-----|---------------------------------|-------------|--------------------------------------------------------------------------|
| 1   | Navega√ß√£o e Diret√≥rios          | `pwd`       | Mostra o caminho completo at√© o diret√≥rio atual                          |
| 2   | Navega√ß√£o e Diret√≥rios          | `cd`        | Muda para o diret√≥rio especificado                                       |
| 3   | Navega√ß√£o e Diret√≥rios          | `ls`        | Lista conte√∫dos de um diret√≥rio                                          |
| 4   | Navega√ß√£o e Diret√≥rios          | `mkdir`     | Cria um diret√≥rio                                                        |
| 5   | Navega√ß√£o e Diret√≥rios          | `rmdir`     | Remove diret√≥rios vazios                                                 |
| 6   | Navega√ß√£o e Diret√≥rios          | `tree`      | Exibe a √°rvore de diret√≥rios e subdiret√≥rios                             |
| 7   | Gerenciamento de Arquivos       | `cp`        | Copia arquivos e diret√≥rios                                              |
| 8   | Gerenciamento de Arquivos       | `mv`        | Move ou renomeia arquivos e diret√≥rios                                   |
| 9   | Gerenciamento de Arquivos       | `ln`        | Cria link simb√≥lico (atalho) de um arquivo ou diret√≥rio                  |
| 10  | Gerenciamento de Arquivos       | `rm`        | Remove arquivos e diret√≥rios                                             |
| 11  | Gerenciamento de Arquivos       | `touch`     | Cria um arquivo vazio                                                    |
| 12  | Gerenciamento de Arquivos       | `zip/unzip` | Compacta (`zip`) e descompacta (`unzip`) arquivos                        |
| 13  | Busca e Filtragem               | `awk`       | Processa e formata texto baseado em padr√µes (extra√ß√£o de colunas, etc)   |
|     | Busca e Filtragem               | `locate`    | Localiza arquivos rapidamente (usa banco de dados indexado)              |
|     | Busca e Filtragem               | `find`      | Procura arquivos em diret√≥rios espec√≠ficos (busca profunda)              |
|     | Busca e Filtragem               | `grep`      | Busca padr√µes dentro de arquivos de texto                                |
|     | Busca e Filtragem               | `which`     | Mostra o caminho completo de um execut√°vel no sistema                    |
|     | Busca e Filtragem               | `whereis`   | Localiza arquivos bin√°rios, fontes e manuais de um comando               |
|     | Transfer√™ncia de Arquivos       | `scp`       | Copia arquivos entre computadores via SSH                                |
|     | Transfer√™ncia de Arquivos       | `rsync`     | Sincroniza e copia arquivos localmente ou remotamente com efici√™ncia     |
|     | Transfer√™ncia de Arquivos       | `wget`      | Faz download de arquivos da internet via HTTP, HTTPS ou FTP              |
|     | Transfer√™ncia de Arquivos       | `curl`      | Transfere dados de ou para um servidor via HTTP, FTP e outros protocolos |
|     | Transfer√™ncia de Arquivos       | `ftp`       | Conecta-se a servidores FTP para transferir arquivos                     |
|     | Transfer√™ncia de Arquivos       | `sftp`      | Transfer√™ncia segura de arquivos via SSH                                 |
|     | Exibi√ß√£o e Leitura de Arquivos  | `cat`       | Exibe o conte√∫do completo de arquivos                                    |
|     | Exibi√ß√£o e Leitura de Arquivos  | `head`      | Exibe as primeiras linhas de um arquivo                                  |
|     | Exibi√ß√£o e Leitura de Arquivos  | `tail`      | Exibe as √∫ltimas linhas de um arquivo                                    |
|     | Exibi√ß√£o e Leitura de Arquivos  | `more`      | Exibe arquivos p√°gina por p√°gina                                         |
|     | Exibi√ß√£o e Leitura de Arquivos  | `less`      | Similar ao `more`, mas permite navega√ß√£o mais flex√≠vel                   |
|     | Exibi√ß√£o e Leitura de Arquivos  | `wc`        | Conta linhas, palavras e caracteres de arquivos                          |
|     | Edi√ß√£o e Processamento de Texto | `sed`       | Editor de texto em linha (substitui√ß√£o, busca e manipula√ß√£o)             |
|     | Edi√ß√£o e Processamento de Texto | `vim`       | Editor de texto avan√ßado em tela cheia                                   |
|     | Edi√ß√£o e Processamento de Texto | `cut`       | Extrai colunas de arquivos delimitados                                   |
|     | Edi√ß√£o e Processamento de Texto | `sort`      | Ordena linhas de arquivos                                                |
|     | Edi√ß√£o e Processamento de Texto | `uniq`      | Remove linhas duplicadas (ap√≥s ordena√ß√£o com `sort`)                     |
|     | Armazenamento e Sistema         | `df`        | Mostra o uso de espa√ßo em disco                                          |
|     | Armazenamento e Sistema         | `du`        | Mostra o uso de espa√ßo por arquivos e diret√≥rios                         |
|     | Permiss√µes e Propriedades       | `chmod`     | Altera permiss√µes de arquivos e diret√≥rios                               |
|     | Permiss√µes e Propriedades       | `chown`     | Altera propriet√°rio e grupo de arquivos e diret√≥rios                     |
|     | Gerenciamento de Processos      | `top`       | Mostra processos em execu√ß√£o e uso de CPU/RAM em tempo real              |
|     | Gerenciamento de Processos      | `ps`        | Lista processos ativos                                                   |
|     | Gerenciamento de Processos      | `kill`      | Encerra (mata) processos                                                 |
|     | Gerenciamento de Processos      | `time`      | Mede o tempo de execu√ß√£o de comandos/programas                           |
|     | Rede e Comunica√ß√£o              | `ping`      | Testa a conectividade com outro servidor                                 |
|     | Rede e Comunica√ß√£o              | `hostname`  | Exibe ou altera o nome do host                                           |
|     | Rede e Comunica√ß√£o              | `wget`      | Faz download de arquivos da internet                                     |
|     | Rede e Comunica√ß√£o / Sistema    | `uname`     | Mostra informa√ß√µes sobre o sistema operacional                           |
|     | Hist√≥rico, Sess√£o e Limpeza     | `history`   | Mostra comandos executados anteriormente                                 |
|     | Hist√≥rico, Sess√£o e Limpeza     | `exit`      | Encerra a sess√£o do terminal                                             |
|     | Hist√≥rico, Sess√£o e Limpeza     | `clear`     | Limpa a tela do terminal                                                 |
|     | Instala√ß√£o de Pacotes           | `apt`       | Gerenciador de pacotes para Debian/Ubuntu (instala, remove, atualiza)    |
|     | Instala√ß√£o de Pacotes           | `dpkg`      | Gerencia pacotes Debian manualmente                                      |
|     | Instala√ß√£o de Pacotes           | `yum`       | Gerenciador de pacotes para RedHat/CentOS (mais antigo)                  |
|     | Instala√ß√£o de Pacotes           | `dnf`       | Gerenciador de pacotes para Fedora e derivados (substitui o `yum`)       |
|     | Instala√ß√£o de Pacotes           | `rpm`       | Gerencia pacotes RPM diretamente                                         |
|     | Instala√ß√£o de Pacotes           | `snap`      | Gerencia pacotes Snap (sandboxed)                                        |
|     | Instala√ß√£o de Pacotes           | `flatpak`   | Gerencia pacotes Flatpak (aplica√ß√µes universais)                         |

## Atalhos de Teclado no Shell Linux

O shell do Linux possui diversos atalhos de teclado que s√£o importantes para otimizar o uso do terminal. Esses comandos ajudam a controlar o comportamento do terminal em situa√ß√µes espec√≠ficas.

### Tabela de Atalhos Mais Importantes

| Atalho   | Descri√ß√£o                                                                                                     |
|----------|---------------------------------------------------------------------------------------------------------------|
| Ctrl + C | Interrompe (mata) o processo que est√° sendo executado no terminal.                                            |
| Ctrl + Z | Suspende (pausa) o processo atual. Pode ser retomado em primeiro plano com `fg` ou em segundo plano com `bg`. |
| Ctrl + W | Corta (recorta) uma palavra antes do cursor e envia para a √°rea de transfer√™ncia.                             |
| Ctrl + U | Corta tudo da linha antes do cursor e envia para a √°rea de transfer√™ncia.                                     |
| Ctrl + K | Corta tudo da linha ap√≥s o cursor e envia para a √°rea de transfer√™ncia.                                       |
| Ctrl + Y | Cola o conte√∫do da √°rea de transfer√™ncia.                                                                     |
| Ctrl + R | Busca no hist√≥rico o √∫ltimo comando que contenha os caracteres digitados.                                     |
| Ctrl + O | Executa o comando recuperado do hist√≥rico.                                                                    |
| Ctrl + G | Sai da busca no hist√≥rico sem executar nenhum comando.                                                        |
| clear    | Limpa a tela do terminal.                                                                                     |
| !!       | Executa novamente o √∫ltimo comando.                                                                           |
| exit     | Encerra a sess√£o atual do terminal.                                                                           |

## üèÉüíª Vamos praticar!!!

Parte I: Atividades dos comandos b√°sicos

1.  Liste os arquivos de um diret√≥rio com o comando `ls`

```{bash}
ls
```

2.  Alguns comandos podem receber par√¢metros adicionais. Normalmente, √© feito pela adi√ß√£o de um `-` ou `--`. Teste o comando `ls -a`, o que ocorreu?

```{bash}
ls -a
```

3.  Teste as varia√ß√µes: `ls -l`, `ls -la`, `ls -lat`. O que mudou?

Listar em forma de lista

```{bash}
ls -l
```

Listar em forma de lista incluindo arq. ocultos

```{bash}
ls -la
```

Listar em forma de lista, incluindo arq. ocultos, em ordem cronol√≥gica

```{bash}
ls -lat
```

4.  Acesse o manual do comando `ls`, adicionando o par√¢metro: `ls --help`.

```{bash}
ls --help
```

5.  Teste o comando `pwd`, o que ele informa?

```{bash}
# pwd = print working directory - mostra o diret√≥rio atual
pwd
```

6.  Crie um diret√≥rio chamado `teste` com o comando `mkdir` (make directory).

```{bash}
# Criar diret√≥rio
mkdir teste
```

7.  O comando `cd` (change directory) serve para nos mover na √°rvore de diret√≥rios.

![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgYZr8R923jJUJS4GrelLm04Tz5GwgbTug6jw3e3pDOOZ0uHTTBFFBzLrBT-SR_V1Pyjxcog55t2aNkz_AElcUOppQhZ-47wN-yJATZ_0ZiZsHWO5MNrRpoE__ZkO-c6ykSS3Q2ax0bEYnO/s1600/Untitled.png)

8.  Entre no diret√≥rio rec√©m-criado com o comando `cd`.

```{bash}
cd teste/
```

9.  Caminhos podem ser **relativos** ou **absolutos**. Volte ao diret√≥rio anterior utilizando o caminho **relativo** (`cd ..`) e avance para ela, novamente, utilizando o caminho **absoluto**.

```{bash}
# Voltar para o diret√≥rio anterior:
cd ../

# Voltar ao "teste" com o caminho absoluto:
cd /home/<usuario>/teste/
```

10. Crie um arquivo vazio chamado `arquivo.txt` com o comando `touch`. Liste os conte√∫dos com o comando `ls`.

```{bash}
# Criando arquivo vazio
touch arquivo.txt

# Checando a presen√ßa do arquivo
ls
```

11. Crie uma c√≥pia do arquivo chamada `arquivo2.txt` com o comando `cp` (copy).

```{bash}
# Criando c√≥pia do 'arquivo.txt' com o nome 'arquivo2.txt'
cp arquivo.txt arquivo2.txt
```

12. Mude o nome do `arquivo.txt` para `arquivo1.txt` com o comando `mv` (move).

```{bash}
# Renomeando 'arquivo.txt' como 'arquivo1.txt'
mv arquivo.txt arquivo1.txt
```

13. Sem sair do diret√≥rio atual ("teste"), crie uma c√≥pia (`cp`) do `arquivo1.txt` como `arquivo3.txt` no diret√≥rio anterior (seu "home"), ent√£o mova-a para o diret√≥rio atual com o comando `mv`.

```{bash}
# Criando uma c√≥pia no diret√≥rio anterior:
cp arquivo1.txt ../arquivo3.txt

# Movendo a c√≥pia para o diret√≥rio atual:
mv ../arquivo3.txt ./
```

[14. Remova os arquivos criados com o comando **rm** (remove).]{style="color:red"}.

```{bash}
# Removendo arquivos
rm arquivo1.txt arquivo2.txt arquivo3.txt

# Ou...
rm arquivo*
```

[15. Retorne ao "home" (cd \~) e apague o diret√≥rio 'teste'. O rm funciona? Tente o `rmdir` ou `rm` `-rf`.]{style="color:red"}.

```{bash}
# Removendo diret√≥rio 'teste'
rmdir teste/

# Ou...
rm -rf teste/
```

::: callout-important
Os arquivos apagado no linux via comando n√£o podem ser recuperados!
:::

**Baixando um conjunto de dados p√∫blicode de exemplo:**

Termos SRA

**NCBI Bioproject:** <br> PRJN#### (exemplo: PRJNA1284310) cont√©m todas as descri√ß√µes de uma unica iniciativa de pesquisa; um projeto est√° tipicamente relacionado a m√∫ltiplas amostras ou conjunto de dados.

**NCBI Biosample:** <br> SAMN#### ou SRS#### (exemplo: SAMN49718651) descreve a fonte do material biol√≥gico; cada especime ou amostra √© registrada como um √∫nico BiosSmple com um √∫nico conjunto de atributos. <br>

**SRA Experiment:** <br> SRX#### uma √∫nica biblioteca de sequenciamento para uma amostra especifica. <br>

**SRA Run:** <br> SRR#### ou ERR#### (exemplo: SRR34300025) √© um arquivo de manifesto dos dados ligados a uma dada biblioteca de sequenciamento (Experiment)

(Veja mais aqui)\[https://www.ncbi.nlm.nih.gov/sra?linkname=bioproject_sra_all&from_uid=1284310\]

16. Baixar dados de um projeto SRA:

https://www.ncbi.nlm.nih.gov/ PRJNA1284310

::: {#ntm2-carousel style="max-width: 1000px; margin: auto; position: relative"}
<img src="images/nt_module02-images/bioproject-01.png" class="ntm2-slide" style="display:block;"/> <img src="images/nt_module02-images/bioproject-02.png" class="ntm2-slide" style="display:none;"/> <img src="images/nt_module02-images/bioproject-03.png" class="ntm2-slide" style="display:none;"/> <img src="images/nt_module02-images/bioproject-04.png" class="ntm2-slide" style="display:none;"/>
:::

::: {style="text-align:center; margin-top: 10px;"}
<button id="ntm2-prev" style="font-size:30px;padding:8px;cursor:pointer;">

‚ùÆ

</button>

<button id="ntm2-next" style="font-size:30px;padding:8px;cursor:pointer;">

‚ùØ

</button>
:::

```{=html}
<style>
  .ntm2-slide { width: 100%; height: auto; max-height: 90vh; object-fit: contain; }
</style>
```
```{=html}
<script>
(function () {
  const slides = Array.from(document.querySelectorAll('#ntm2-carousel .ntm2-slide'));
  if (!slides.length) return;
  slides.forEach(img => { img.onerror = function () { this.style.display = 'none'; }; });

  let idx = 0;
  const show = (i) => { slides.forEach(s => s.style.display = 'none'); slides[i].style.display = 'block'; };
  show(idx);
  document.getElementById('ntm2-prev').addEventListener('click', () => { idx = (idx - 1 + slides.length) % slides.length; show(idx); });
  document.getElementById('ntm2-next').addEventListener('click', () => { idx = (idx + 1) % slides.length; show(idx); });
})();
</script>
```
16.A Usando SRA Toolkit

::: callout-note
Instale SRA toolkit em sua maquina virtual local Visite o reposit√≥rio do NCBI SRA Toolkit (https://github.com/ncbi/sra-tools/wiki/01.-Downloading-SRA-Toolkit) para baixar e instalar o SRA Toolkit apropriado para seu sistema operacional
:::

Crie uma pasta chamada SRA no sua "home" e entre nela:

```{bash}
cd ~          # vai para a sua home
mkdir SRA     # cria o diret√≥rio SRA
cd SRA        # entra no diret√≥rio SRA
```

Recuperando uma n√∫mero de acesso (SRA Run) do bioprojeto PRJNA1284310

```{bash}
# sed -n '10p': Pegar a 10¬™ linha (o decimo elemento da lista de acessos relacionadas ao bioproject)

esearch -db sra -query PRJNA1284310 | efetch -format runinfo | cut -f 1 -d "," |  tail -n +2 | sed -n '10p' > sras.txt
```

```{bash}
# shuf -n 1: recupera um numeor de acesso aleat√≥rio (recupera um elemento da lista de acessos relacionadas ao bioproject de forma aleatoria)

esearch -db sra -query PRJNA1284310 | efetch -format runinfo | cut -f 1 -d "," |  tail -n +2 | shuf -n 1 > sras.txt
```

Verificando conteudo do diretorio

```{bash}
ls -lh 
```

Convertendo o arquivo sra para formato fastq (separacao do arquivo R1 e R2)

```{bash}
xargs -n 1 fastq-dump --split-files < sras.txt
```

Visualizando as primeiras linhas dos arquivos

```{bash}
head -n 8 *.fastq
```

**Estrutura de um arquivo fastq**

![(Fonte: http://knowledgebase.bioinformagic.io/ngs_landing.html)](images/rawilluminadatafastqfiles.png)

16.B Usando comando Linux (**Nao recomendado**)

Usando curl

```{bash}
# a flag -L (ou --location) significa: seguir redirecionamentos HTTP/HTTPS automaticamente.
# a flag -o (ou --output) serve para definir o nome do arquivo de sa√≠da.

curl -L -o SRR34299986.sra ftp://ftp-trace.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByRun/sra/SRR/SRR342/SRR34299986/SRR34299986.sra
```

Usando wget

```{bash}

wget ftp://ftp-trace.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByRun/sra/SRR/SRR342/SRR34299986/SRR34299986.sra
```

17. Outras formas de visualizar os arquivos com os comandos: head, tail, more, less e cat. Quais as diferen√ßas?

```{bash}
# head: primeiras linhas. Por padr√£o s√£o 10, podem ser espec√≠ficadas
head -5 SRR34299962_1.fastq

# tail: head inverso
tail -5 SRR34299962_1.fastq

# more: visualizar arquivo de forma paginada (aperte 'q' para sair)
more amostra1.fastq

# less: similar ao 'more', controle com setas ou pg up/pg down. Teste com o par√¢metro '-S' para uma visualiza√ß√£o mais natural
less SRR34299962_1.fastq
less -S SRR34299962_1.fastq

# cat: abre o arquivo do come√ßo ao fim
cat SRR34299962_1.fastq
```

18. Use o comando wc e descubra quantas linhas e quantas sequ√™ncias temos nessas bibliotecas.

```{bash}
# wc (word count) mostra: linhas(-l)/palavras(-w)/caracteres(-c)
wc SRR34299962_1.fastq
wc -l SRR34299962_1.fastq
```

19. Contando numero de sequencia com a calculadora bc

```{bash}
echo "$(wc -l < SRR34299962_1.fastq)/4" | bc
```

Usando awk:

```{bash}
wc -l SRR34299962_1.fastq | awk '{print $1/4}'
```

20. Use o comando grep para encontrar padr√µes nos arquivos. √â poss√≠vel identificar o n√∫mero de sequ√™ncias presentes? Dica: Encontre um padr√£o √∫nico!

```{bash}
# GREP - procura padr√£o dentro de arquivos de texto.
# Seq. qualquer:
grep "AAAAT" SRR34299962_1.fastq

grep "@SRR" SRR34299962_1.fastq  # Isolamento dos IDs
```

| Comando                                  | Descri√ß√£o                                                                   |
|------------------------------------------|-----------------------------------------------------------------------------|
| `grep "padr√£o" arquivo.txt`              | Procura a string `"padr√£o"` no arquivo `arquivo.txt`.                       |
| `grep -i "padr√£o" arquivo.txt`           | Faz a busca sem diferenciar mai√∫sculas de min√∫sculas.                       |
| `grep -n "padr√£o" arquivo.txt`           | Exibe o n√∫mero da linha onde a correspond√™ncia foi encontrada.              |
| `grep -v "padr√£o" arquivo.txt`           | Exibe todas as linhas que **n√£o** cont√™m a string `"padr√£o"`.               |
| `grep -r "padr√£o" diret√≥rio/`            | Realiza uma busca recursiva em todos os arquivos dentro do diret√≥rio.       |
| `grep -w "padr√£o" arquivo.txt`           | Encontra apenas ocorr√™ncias da palavra exata `"padr√£o"`.                    |
| `grep -A 2 "padr√£o" arquivo.txt`         | Exibe duas linhas **ap√≥s** a linha que cont√©m a correspond√™ncia.            |
| `grep -B 2 "padr√£o" arquivo.txt`         | Exibe duas linhas **antes** da linha que cont√©m a correspond√™ncia.          |
| `grep -C 2 "padr√£o" arquivo.txt`         | Exibe duas linhas **antes e depois** da linha que cont√©m a correspond√™ncia. |
| `grep -E "padr√£o1\|padr√£o2" arquivo.txt` | Busca por ocorr√™ncias de `"padr√£o1"` **ou** `"padr√£o2"`.                    |
| `grep -c "padr√£o" arquivo.txt`           | Conta o n√∫mero de linhas que cont√™m a string `"padr√£o"`.                    |

Com base nos exemplos. 1. Conte numero de sequencia de tamanho de 301

21. Combine comandos em sequ√™ncia com o "pipe" (\|). Para testar, combine o comando grep com o wc -l.

```{bash}
# Carregando os IDs e contando as linhas:
grep "@SRR" SRR34299962_1.fastq | wc -l
```

22. A sa√≠da das execu√ß√µes podem ser redirecionadas para um arquivo com o \> (sobrescrever) ou \>\> (adicionar). Salve os IDs das sequ√™ncias de cada biblioteca em um arquivo a parte (IDs1.txt, IDs2.txt), combinando o grep com o redirecionador \>.

```{bash}
# Carregando os IDs e repassando a um arquivo:
grep "@SRR" SRR34299962_1.fastq > IDs1.txt
grep "@SRR" SRR34299962_2.fastq > IDs2.txt
```

22. O comando cat pode concatenar m√∫ltiplos arquivos em sequ√™ncia. Utilize-o com os IDs e repasse tudo para um √∫nico arquivo.

```{bash}
# Concatenando e salvando IDs de m√∫ltiplos arquivos
cat IDs1.txt IDs2.txt > IDs.txt

# Ou...
cat IDs*.txt > IDs.txt
```

23. Vamos observar se h√° IDs repetidas entre as bibliotecas. Para isso, vamos ordenar o arquivo IDs.txt com o comando sort e combina-lo com o reverso do comando uniq (uniq -d). Salve o resultado em um novo arquivo: IDs_duplicados.txt

```{bash}
# Ordenando IDs (alfabeticamente) e detectando duplicados:
sort IDs.txt | uniq -d

# Salvando a sa√≠da:
sort IDs.txt | uniq -d > IDs_duplicados.txt
```

24. Por fim, vamos rodar o programa pullseq para obter essas sequ√™ncias e salva-las em um novo arquivo. Contudo, o pullseq n√£o tolera o caractere especial inicial das sequ√™ncias (Ex. "\>" ou "\@") e, portanto, precisamos remove-lo. Para isso, utilizaremos o editor de texto em linha sed com o par√¢metro 's/\@//g' (l√™-se: "substitua o '\@' por nada") e salvar a sa√≠da no arquivo: IDs_duplicados2.txt.

```{bash}
# SED √© um editor de texto capaz de alterar o conte√∫do diretamente na sua sa√≠da.
sed 's/@/AAAAAA/g' IDs_duplicados.txt

# Removendo o '@' e salvando em um novo arquivo:
sed 's/@//g' IDs_duplicados.txt > IDs_duplicados2.txt
```

25. Rode o pullseq passando o caminho da biblioteca com as sequ√™ncias (--input) e do arquivo com os IDs (--names). Repasse a sa√≠da para um arquivo (\>).

```{bash}
# Conhe√ßa o 'pullseq' com o comando 'pullseq --help'
pullseq --help

# Rodando o 'pullseq':
pullseq --input SRR34299962_1.fastq --names IDs_duplicados2.txt

# Rodando o 'pullseq' e salvando o resultado:
pullseq --input SRR34299962_1.fastq --names IDs_duplicados2.txt > seqs_duplicadas.fastq
```

26. Crie um diret√≥rio chamado tutorial_linux e repasse os arquivos gerados at√© aqui para l√°, combiando o comando mv com o caractere coringa (\*) + a extens√£o dos arquivos.

```{bash}
# Criando o diret√≥rio:
mkdir tutorial_linux

# Movendo arquivos: 
mv *fastq ./tutorial_linux
mv *txt ./tutorial_linux
```

## Estruturas de repeticao (loops)

### For (Para)

√â uma declara√ß√£o de controle de fluxo em programa√ß√£o que permite executar um bloco de c√≥digo repetidamente, baseado em uma condi√ß√£o espec√≠fica. Isso √© comumente usado quando voc√™ j√° conhece quantas vezes deseja executar o bloco de c√≥digo. Pode ser utilizado para iterar sobre uma sequ√™ncia de elementos ou realizar um conjunto de tarefas um n√∫mero fixo de vezes.

![(Fonte: https://www.geeksforgeeks.org/dsa/for-loop-in-programming/)](images/for.png)

Exemplo:

```{bash}
for i in 1 2 3 4 5; do echo "N√∫mero: $i"; done
```

Exemplo:

```{bash}
# Criando um arquivo (lista de nomes)
echo -e "Ana\nBruno\nCarlos\nDaniela\nEduardo" > nomes.txt

# # Itera√ß√£o para imprimir cada nome
for nome in $(cat nomes.txt); do echo "Ol√°, $nome!"; done
```

### While (Enqunato)

√â uma estrutura de controle de fluxo fundamental em programa√ß√£o, que permite a execu√ß√£o de um bloco de c√≥digo repetidamente enquanto uma condi√ß√£o especificada permanecer verdadeira. O comando while avalia a condi√ß√£o antes de cada itera√ß√£o, executa o bloco de c√≥digo se a condi√ß√£o for verdadeira e termina quando a condi√ß√£o se torna falsa. Esse mecanismo permite flexibilizar intera√ß√µes baseadas em mudan√ßas de condi√ß√µes dentro do programa.

![(Fonte: https://www.geeksforgeeks.org/dsa/while-loop-in-programming/)](images/while.png)

**Comparadores num√©ricos do Bash:**

| Operador  | Significado    | Ingl√™s           |
|-----------|----------------|------------------|
| **`-lt`** | Menor que      | less than        |
| **`-le`** | Menor ou igual | less or equal    |
| **`-eq`** | Igual          | equal            |
| **`-ne`** | Diferente      | not equal        |
| **`-gt`** | Maior que      | greater than     |
| **`-ge`** | Maior ou igual | greater or equal |

<br>

Exemplo:

```{bash}
count=0; while [ $count -lt 5 ]; do echo $count; count=$((count+1)); done
```

üîë Diferen√ßa pr√°tica

**for:** voc√™ j√° sabe o intervalo/lista (ex.: percorrer arquivos, n√∫meros de 1 a 10, elementos de uma lista).

**while:** voc√™ repete at√© que uma condi√ß√£o deixe de ser verdadeira (ex.: esperar um processo terminar, ler linhas de um arquivo at√© acabar).

Exemplo pr√°tico

```{bash}
<!-- # --------------------------------------------------------------- -->
<!-- # Passo 1: Criar um arquivo com 3 acessos (SRR) do projeto SRA -->
<!-- # --------------------------------------------------------------- -->
<!-- # - esearch consulta o banco SRA (NCBI) usando o ID do projeto (PRJNA) -->
<!-- # - efetch retorna as informa√ß√µes no formato runinfo (CSV) -->
<!-- # - cut extrai a primeira coluna (os SRR, separando por v√≠rgula) -->
<!-- # - tail -n +2 pula a primeira linha (cabe√ßalho do CSV) -->
<!-- # - head -n 3 pega apenas os 3 primeiros acessos -->
<!-- # - > sras_n3.txt salva o resultado em um arquivo texto -->
esearch -db sra -query PRJNA1284310 | efetch -format runinfo | cut -f 1 -d "," | tail -n +2 | head -n 3 > sras_n3.txt

<!-- # --------------------------------------------------------------- -->
<!-- # Passo 2: Iterar sobre cada acesso e baixar os FASTQ -->
<!-- # --------------------------------------------------------------- -->
<!-- # - while read srr: l√™ linha por linha do arquivo "sras_n3.txt" -->
<!-- # - $srr guarda o identificador (ex.: SRR34299962) -->
<!-- # - echo informa qual acesso est√° sendo baixado -->
<!-- # - curl baixa os arquivos FASTQ (par 1 e 2) -->
<!-- #   * -L segue redirecionamentos -->
<!-- #   * -C - permite retomar downloads interrompidos -->
<!-- #   * -o especifica o nome do arquivo de sa√≠da -->

while read srr; do
  echo "Baixando $srr ..."
  
  # Read 1
  curl -L -C - "https://ftp.sra.ebi.ac.uk/vol1/fastq/${srr:0:6}/${srr: -5}/${srr}/${srr}_1.fastq.gz" -o "${srr}_1.fastq.gz"

  # Read 2
  curl -L -C - "https://ftp.sra.ebi.ac.uk/vol1/fastq/${srr:0:6}/${srr: -5}/${srr}/${srr}_2.fastq.gz" -o "${srr}_2.fastq.gz"
  
done < sras_n3.txt
```

## Screen

Uma das vantagens de se processar dados em um servidor √© a poss√≠bilidade de executar as tarefas em background, ou seja, sem a necessidade de estar diretamente ligado √† tarefa, ou mesmo com a interface ligada. Contudo, isso n√£o √© feito de forma autom√°tica e requer alguns comando espec√≠ficos.

Uma forma mais simples √© a utiliza√ß√£o do programa screen. Esse utilit√°rio, permite a abertura de uma tela paralela, com o adicional de possuir m√∫ltiplas abas, e que pode ser facilmente "desacoplada" e "acoplada" novamente. Dessa forma, jogando processos longos para o background sem risco de interrompe-los.

Agora, vamos abrir um novo screen nomeado com o comando abaixo:

```{bash}
screen -S teste
```

Vamos treinar o ato de sair e voltar, novamente, para o screen. Para isso, utilizaremos primeiro a fun√ß√£o de "detach". Pressione as teclas CTRL + A seguido da tecla D. Note que voc√™ voltou para a tela sem screen.

Para retornar ao screen, utilize o comando:

```{bash}
screen -r teste
```

**Alguns atalhos ut√©is p/ screen s√£o:**

| **Atalho**       | **Fun√ß√£o**                                       |
|------------------|--------------------------------------------------|
| CTRL+A + D       | Desacopla *screen*, voltando √† tela normal       |
| CTRL+A + C       | Cria uma nova aba                                |
| CTRL+A + A       | Retorna para a √∫ltima aba usada                  |
| CTRL+A + N       | Avan√ßa para a pr√≥xima aba                        |
| CTRL+A + P       | Volta para a aba anterior                        |
| CTRL+A + \[0-9\] | Vai para aba espec√≠fica                          |
| CTRL+A + K       | Mata a aba atual                                 |
| CTRL+A + Esc     | Libera o cursor, permitindo mover a visualiza√ß√£o |

<br>

**Alguns comandos ut√©is p/ screen s√£o:**

| Comando                    | Fun√ß√£o                                                          |
|----------------------------|-----------------------------------------------------------------|
| `screen`                   | Abre uma screen n√£o-nomeada                                     |
| `screen -S <nome>`         | Abre uma screen com o nome `<nome>`                             |
| `screen -r`                | Retorna para a screen desacoplada, se s√≥ existir uma aberta     |
| `screen -r <nome>`         | Retorna para screen desacoplada `<nome>`                        |
| `screen -X <nome>`         | Retorna para uma screen acoplada `<nome>` (m√∫ltiplas janelas)   |
| `screen -ls`               | Lista todas as screens abertas, acopladas ou n√£o                |
| `screen -wipe <nome>`      | Elimina uma screen travada (s√≥ se ela estiver "morta")          |
| `screen -X -S <nome> quit` | Elimina uma screen travada (n√£o-morta)                          |
| `exit`                     | (Dentro da screen) Fecha aba / Finaliza screen se for √∫nica aba |
| `screen --help`            | Mostra todos os comandos poss√≠veis do screen                    |

## Instala√ß√£o de programas
